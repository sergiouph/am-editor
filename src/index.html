<!DOCTYPE html>
<head>
  <title>Automata Editor</title>
  <script src="index.ts"></script>
  <style type="text/css">
    #layout {
      display: flex;
    }
    #input {
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div id="layout">
    <div>
      <textarea
        id="input"
        cols="30"
        rows="50"
        name="input"
      ></textarea>
    </div>
    <div id="output"></div>
  </div>
  <script>
    function refresh() {
      ame
        .generateSvgElement(document.getElementById('input').value)
        .then((element) => {
          const container = document.getElementById('output');
          while (container.firstChild) {
            container.removeChild(container.lastChild);
          }
          container.appendChild(element);
        })
        .catch((e) => console.error(e));
    }

    document.getElementById('input').onchange = refresh

    ame
      .loadExample()
      .then((text) => {
        document.getElementById('input').value = text
        
        refresh()
      })
      .catch((e) => console.error(e));
  </script>
</body>
